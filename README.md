# Smartcar-humidifier-Arduino
Smart mobile small car / mobile humidifier, based on Arduino, with GUI in matlab
基于单片机（Arduino）的智能移动加湿器
（主要是智能移动小车了）

# 功能模式
模式①静止加湿：智能小车在静止于某一位置，加湿器进行湿度判断和加湿操作。若湿度值低于阈值静止加湿；若湿度值超过阈值则停止加湿，同时湿度和温度会即时刷新在小车车身LCD屏幕和电脑端GUI界面，同时电脑端可以绘制最近的温度、湿度曲线。此时GUI界面上有“停止加湿”按钮，同时在停止加湿状态下，点击“静止加湿”即可恢复自动加湿状态。
模式②湿度扫描：小车根据障碍物情况选择行进路线连续移动，实时记录温度湿度与位置回传给电脑端，绘制四维空间温湿度分布图，此时加湿器关闭。当用户按下GUI端“定位”按钮时，小车将行驶至湿度最低点，打开加湿器，进入静止加湿模式。
模式③湿度定点：通过GUI设置加湿阈值，同时小车开始随机选择一个靠近墙面的位置停止，加湿器开始加湿直到附近空气湿度达到阈值，然后小车开始寻找一个新的位置停止并加湿，此模式下同样实时绘制温度湿度曲线。
模式④手动控制：手动控制小车前往某一地点，包括前进、后退等方向操作。

# 硬件
Arduino Mega2560/
LCD-1602模块及配套PCF8574模块/
DHT11温湿度传感器模块/
继电器模块/
雾化片及其驱动模块/
L298N模块/
SR04超声波距离模块/
HC-05蓝牙模块/
电池电源/
直流电机/
小车底盘、车轮等/
*单片机端口可以自行改变*


# *单片机*
通过蓝牙接收数据，当接收到’m’、1两个字符串时，单片机进入“静止加湿”模式，此时电机停止运行，加湿器处于自动模式，并将湿度、温度数据传输至电脑端；
接收到’m’、2两个字符串时，单片机进入“湿度扫描”模式，小车根据前方障碍物情况选择行进路线，随后计算位置信息并连同湿度温度传输回电脑端，电脑端通过存储计算后将湿度最低的点回传给单片机，小车则运行到湿度最低处；
接收到’m’、3两个字符串时，单片机进入“湿度定点”模式，小车行进并选择一个靠墙（15cm）的位置定点加湿，到达阈值（可更改）后更换地点加湿；
当进入“手动模式”时，根据电脑端传来的操作指令进行小车行进的控制。

# *GUI*
“连接蓝牙”：将蓝牙读取为文件，便于后续的数据读写；
“静止加湿”：向单片机传输静止加湿的模式指令，每隔3秒接收一组温度和湿度的数据，显示在右上方文本中，并将最近的百组温度湿度数据绘制在右方的坐标轴，实现数据可视化；
“湿度扫描”：向单片机传输湿度扫描的模式指令，单片机开始根据障碍物情况选择行进路线并将温度、湿度、位置传给电脑；单击“定位”，电脑根据相应数据信息选择湿度最低的地点回传给单片机并绘制有关位置信息的湿度三维曲线图；
“湿度定点”：根据右方文本框阈值设定，向单片机传输湿度定点模式指令，同样每隔3秒接收一组温度和湿度的数据，显示在右上方文本中，并将最近的128组温度湿度数据绘制在右方的坐标轴；
“手动操控”：按照操控方向向单片机发送相应的行进指令，包括前进、后退、左转、右转、停止、点移。

# Beihang University
 
